<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Middle East â€” Neon Land, Navy Sea, Hover Country Names</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<script src="https://api.tiles.mapbox.com/mapbox-gl-js/v0.41.0/mapbox-gl.js"></script>
<link href="https://api.tiles.mapbox.com/mapbox-gl-js/v0.41.0/mapbox-gl.css" rel="stylesheet" />
<style>
    body { margin:0; padding:0; }
    #map { position:absolute; top:0; bottom:0; width:100%; }

    .mapboxgl-popup {
      padding-bottom: 8px;
    }

    .mapboxgl-popup-content {
      font: 600 12px/1.2 "Helvetica Neue", Arial, sans-serif;
      padding: 6px 8px;
      border-radius: 6px;
      background: rgba(10,26,63,0.92);
      color: #00e5ff;
      box-shadow: 0 6px 18px rgba(0,0,0,.35);
    }

    .mapboxgl-popup-tip {
      border-top-color: rgba(10,26,63,0.92) !important;
    }

    /* hide mapbox logo and attribution */
    .mapboxgl-ctrl-logo,
    .mapboxgl-ctrl-attrib {
      display: none !important;
    }
</style>
</head>
<body>
<div id="map"></div>
 
<script>
  mapboxgl.accessToken = 'pk.eyJ1IjoieG15b290IiwiYSI6ImNqOXdhMDR2OTU4dTgycXBnejAycTc2Z3AifQ.IbKaD_XfuTq69TO9b06e6A';
 
  var ME_BOUNDS = [[25, 12], [60, 38]];
 
  var NAVY = '#0a1a3f'; 
  var NEON = '#00e5ff'; 

  var ME_COUNTRIES = [
    'Bahrain', 'Egypt', 'Iran', 'Iraq', 'Israel', 'Jordan',
    'Kuwait', 'Lebanon', 'Oman', 'Palestine', 'Qatar', 'Saudi Arabia',
    'Syria', 'Turkey', 'United Arab Emirates', 'Yemen'
  ];
 
  var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v9',
    center: [20, 20],
    zoom: 0.8,
    attributionControl: false   // this disables the bottom-right attribution
  });
 
  var didLockBounds = false;

  map.on('load', function () {
    setTimeout(function () {
      var targetBounds = new mapboxgl.LngLatBounds(ME_BOUNDS);
      var targetCenter = targetBounds.getCenter();
      var targetZoom = 5.4;
      
      map.easeTo({
        center: targetCenter,
        zoom: targetZoom,
        duration: 4300,
        easing: function (t) {
          return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;
        }
      });

      setTimeout(function () {
        if (!didLockBounds) {
          didLockBounds = true;
          var expandLng = 8;
          var expandLat = 8;
          var expanded = [
            [ME_BOUNDS[0][0] - expandLng, ME_BOUNDS[0][1] - expandLat],
            [ME_BOUNDS[1][0] + expandLng, ME_BOUNDS[1][1] + expandLat]
          ];
          map.setMaxBounds(expanded);
        }
      }, 4000);
    }, 150);
 
    var layers = map.getStyle().layers || [];
 
    layers.forEach(function (layer) {
      var isSymbol = layer.type === 'symbol';
      var hasText = layer.layout && layer.layout['text-field'];
      if (isSymbol && hasText) {
        try { map.setLayoutProperty(layer.id, 'visibility', 'none'); } catch(e){}
      }
    });
 
    layers.forEach(function (layer) {
      var id = layer.id;
      var keep =
        layer.type === 'background' ||
        id.indexOf('water') > -1 ||
        id.indexOf('admin-0-boundary') > -1 ||
        id.indexOf('admin-1-boundary') > -1;
      if (!keep) {
        try { map.setLayoutProperty(id, 'visibility', 'none'); } catch(e){}
      }
    });
 
    layers.forEach(function (layer) {
      var id = layer.id;
      if (layer.type === 'background') {
        map.setPaintProperty(id, 'background-color', NAVY);
      }
      if (id.indexOf('water') > -1) {
        if (layer.type === 'fill') {
          map.setPaintProperty(id, 'fill-color', NAVY);
          map.setPaintProperty(id, 'fill-opacity', 1);
        }
        if (layer.type === 'line') {
          map.setPaintProperty(id, 'line-color', NAVY);
          map.setPaintProperty(id, 'line-opacity', 1);
        }
      }
      if ((id.indexOf('admin-0-boundary') > -1 || id.indexOf('admin-1-boundary') > -1) && layer.type === 'line') {
        map.setPaintProperty(id, 'line-color', NAVY);
        map.setPaintProperty(id, 'line-width', 1.2);
      }
    });
 
    map.addSource('countries', {
      type: 'vector',
      url: 'mapbox://mapbox.country-boundaries-v1'
    });
 
    map.addLayer({
      id: 'country-fills',
      type: 'fill',
      source: 'countries',
      'source-layer': 'country_boundaries',
      paint: {
        'fill-color': NEON,
        'fill-opacity': 0.92
      },
      filter: ['in', 'name_en'].concat(ME_COUNTRIES)
    }, getTopWaterLayerId());
 
    map.addLayer({
      id: 'country-borders-navy',
      type: 'line',
      source: 'countries',
      'source-layer': 'country_boundaries',
      paint: {
        'line-color': NAVY,
        'line-width': 1.6
      },
      filter: ['in', 'name_en'].concat(ME_COUNTRIES)
    });
 
    map.addLayer({
      id: 'country-fills-hover',
      type: 'fill',
      source: 'countries',
      'source-layer': 'country_boundaries',
      paint: {
        'fill-color': '#66f0ff',
        'fill-opacity': 0.9
      },
      filter: ['all', ['in', 'name_en'].concat(ME_COUNTRIES), ['==', 'name_en', '']]
    });
 
    var popup = new mapboxgl.Popup({ closeButton: false, closeOnClick: false });
 
    map.on('mousemove', 'country-fills', function (e) {
      if (!e.features || !e.features.length) return;
      var f = e.features[0];
      var name = f.properties && (f.properties.name_en || f.properties.name);
      var iso = f.properties && (f.properties.iso_3166_1_alpha_3 || '');
 
      map.setFilter('country-fills-hover', ['all', ['in', 'name_en'].concat(ME_COUNTRIES), ['==', 'name_en', name]]);
 
      var lngLat = e.lngLat;
      if (lngLat.lng < ME_BOUNDS[0][0] || lngLat.lng > ME_BOUNDS[1][0] ||
          lngLat.lat < ME_BOUNDS[0][1] || lngLat.lat > ME_BOUNDS[1][1]) {
        popup.remove();
        return;
      }
 
      popup
        .setLngLat(lngLat)
        .setHTML(name ? name : (iso || 'Country'))
        .addTo(map);
    });
 
    map.on('mouseleave', 'country-fills', function () {
      map.setFilter('country-fills-hover', ['==', 'name_en', '']);
      popup.remove();
    });
 
    function getTopWaterLayerId() {
      var waterLayers = (map.getStyle().layers || []).filter(function (l) {
        return l.id.indexOf('water') > -1;
      });
      return waterLayers.length ? waterLayers[waterLayers.length - 1].id : undefined;
    }
  });
</script>
</body>
</html>
